---
title: 前端性能优化
date: 2020-04-01 00:23:00
tags:
---

### 经典问题回顾 ###

从输入 URL 到页面加载完成到底发生了什么？

	URL经过DNS解析为IP地址，然后与IP地址进行TCP连接，随后发出HTTP请求，服务器处理完请求之后将内容通过HTTP发送给客户端，拿到数据之后浏览器就开始渲染流程。

从中可以优化的点：
- **DNS预解析** ：浏览器在用户访问链接之前解析域名，减少DNS解析的时间，浏览器对网站域名的查找流程：浏览器缓存->系统缓存->路由器缓存->DNS服务器。

- 让域名不需要用户点击链接就在后台解析，而域名解析和内容载入使串行的网络操作，这个操作能减少用户的等待时间，提升用户体验
>  用法：放在meta标签后面



1. 通过减少HTTP请求来优化，通过合并图片减少请求，<font color=red>sprites也称作 雪碧图，</font>CSS图像合成技术；
2. lazyload，懒加载/延迟加载，重写get请求，当系统调用get时再去加载
3. 减少repaint(:指的是一种不会影响当前DOM结构和布局的一种重绘动作)和reflow(要发生在 DOM 树被操作的时候，任何改变 DOM 的结构和布局都会产生 Reflow。但一个元素的 Reflow 操作发生时，它的所有父元素和子元素都会发生Reflow，最后 Reflow 必然会导致 Repaint 的产生)，那么哪些元素会repaint，哪些会reflow呢，这里总结一下：

> repaint的触发： 不可见到可见（visibility 样式属性）;颜色或图片变化（background, border-color, color 样式属性）;text-align、a：hover也会造成重绘，伪类引起的颜色等变化不会导致页面的回流，仅仅会触发重绘。不改变页面元素大小，形状和位置，但改变其外观的变化
> reflow的触发：浏览器窗口的变化;DOM 节点的添加删除操作一些改变页面元素大小，形状和位置的操作的触发如CSS3 动画(animation)和过渡(transition)，动画的每一frame都会触发reflow。
### 如何避免 ###
1. 设置动画元素position属性为fixed或absolute：由于当前元素从dom流中独立出来，因此受影响的只有当前元素。
2. 避免使用table进行布局，table每个元素的大小以及内容的改变，都会导致整个table进行重新计算
3. 避免设置多项内联样式，使用常用的class方式进行设置样式，以避免设置样式时访问dom的低效率。
4. 避免在CSS中使用运算式


从HTTP1到HTTP2，性能有了极大的提高，引入了多路复用技术，这个技术的支持下，同一域名的所有请求都在一个通道内完成，引入了帧和流，帧是数据最小的传输单位，流就是数据流，是多个数据帧组成的，**多路复用**就是一个连接下存在多个流，而HTTP1中，每个请求都创建一个TCP连接，浏览器还限制同一域名下的请求数量，HTTP/2采用了二进制传输取代了HTTP1的文本传输，更高效。

